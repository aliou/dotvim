" Source local file if it exists.
if filereadable(glob("~/.vimrc.local"))
  let $MYLOCALVIMRC="~/.vimrc.local"
  source $MYLOCALVIMRC
endif

if filereadable('.vimrc.local') && getcwd() != expand('~')
  source .vimrc.local
endif

function! s:EditRcFile(file)
  exe "edit ~/.vim/rcfiles/" . a:file
endfunction

function! s:ListRcFiles(A, L, P)
  let rcFiles       = []
  let rcFilePath    = expand("~") . "/.vim/rcfiles/"
  let fullPathFiles = split(globpath(rcFilePath, "*"), "\n")

  for _file in fullPathFiles
    let rcFile = substitute(_file, rcFilePath, "", "g")
    call add(rcFiles, rcFile)
  endfor

  return join(rcFiles, "\n")
endfunction

command! -complete=custom,s:ListRcFiles -nargs=1 Ercfile :call s:EditRcFile(<f-args>)

function! s:EditRcPlugin(file)
  exe "edit ~/.vim/rcplugins/" . a:file
endfunction

function! s:ListRcPlugins(A, L, P)
  let rcPlugins     = []
  let rcPluginPath  = expand("~") . "/.vim/rcplugins/"
  let fullPathFiles = split(globpath(rcPluginPath, "*"), "\n")

  for _file in fullPathFiles
    let rcFile = substitute(_file, rcPluginPath, "", "g")
    call add(rcPlugins, rcFile)
  endfor

  return join(rcPlugins, "\n")
endfunction

command! -complete=custom,s:ListRcPlugins -nargs=1 Ercplugin :call s:EditRcPlugin(<f-args>)

" vim:ft=vim
